<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Óra – Időjárás</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
    background:black;
    color:white;
    font-family:"Outfit",sans-serif;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}

.clock{
    font-size:14vw;
    font-weight:600;
    letter-spacing:0.1em;
}

.colon{
    animation:blink 1s steps(1) infinite;
}

@keyframes blink{
    50%{opacity:0;}
}

.date{font-size:4vw;font-weight:600;margin-top:.6rem;}
.day{font-size:3.5vw;margin-top:.4rem;}

.weather{margin-top:1.2rem;text-align:center;}

.weather-now{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:1rem;
    font-size:3vw;
}

.weather-tomorrow{
    margin-top:.6rem;
    font-size:2.5vw;
    opacity:.85;
}

.weather-icon{width:4.5vw;height:4.5vw;}

@keyframes spin{to{transform:rotate(360deg);}}
@keyframes float{50%{transform:translateX(6px);}}

.sun{animation:spin 18s linear infinite;}
.cloud{animation:float 4s ease-in-out infinite;}
</style>
</head>

<body>

<div class="clock" id="clock"></div>
<div class="date" id="date"></div>
<div class="day" id="day"></div>

<div class="weather">
    <div class="weather-now">
        <div id="weatherIcon" class="weather-icon"></div>
        <div id="weatherText"></div>
    </div>
    <div class="weather-tomorrow" id="weatherTomorrow"></div>
</div>

<script>
function updateTime(){
    const n=new Date();
    const d=['Vasárnap','Hétfő','Kedd','Szerda','Csütörtök','Péntek','Szombat'];

    const h=String(n.getHours()).padStart(2,'0');
    const m=String(n.getMinutes()).padStart(2,'0');

    clock.innerHTML=`${h}<span class="colon">:</span>${m}`;
    date.textContent=n.toLocaleDateString('hu-HU',{year:'numeric',month:'long',day:'numeric'});
    day.textContent=d[n.getDay()];
}

function icon(code,isDay){
    if(code===0)
        return isDay
        ? `<svg class="sun" viewBox="0 0 100 100"><circle cx="50" cy="50" r="20" fill="#FFD93B"/></svg>`
        : `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="20" fill="#B0C4DE"/></svg>`;
    if(code<=3)
        return `<svg class="cloud" viewBox="0 0 100 100"><ellipse cx="50" cy="55" rx="30" ry="18" fill="#ccc"/></svg>`;
    if(code>=61 && code<=80)
        return `<svg viewBox="0 0 100 100">
            <ellipse cx="50" cy="40" rx="28" ry="16" fill="#bbb"/>
            <line x1="40" y1="60" x2="35" y2="75" stroke="#4FC3F7" stroke-width="4"/>
            <line x1="55" y1="60" x2="50" y2="75" stroke="#4FC3F7" stroke-width="4"/>
        </svg>`;
    if(code>=71)
        return `<svg viewBox="0 0 100 100"><text x="50%" y="55%" text-anchor="middle" font-size="40">❄️</text></svg>`;
    return `<svg viewBox="0 0 100 100"><text x="50%" y="55%" text-anchor="middle" font-size="40">⛈️</text></svg>`;
}

async function updateWeather(){
    const url=`https://api.open-meteo.com/v1/forecast?latitude=46.374&longitude=18.134&current=temperature_2m,weather_code,is_day&daily=weather_code,temperature_2m_min,temperature_2m_max&timezone=Europe/Budapest`;
    const r=await fetch(url);
    const d=await r.json();

    const t=Math.round(d.current.temperature_2m);
    const c=d.current.weather_code;
    const isDay=d.current.is_day===1;

    const tMin=Math.round(d.daily.temperature_2m_min[1]);
    const tMax=Math.round(d.daily.temperature_2m_max[1]);
    const cTomorrow=d.daily.weather_code[1];

    const txt={
        0:'Derült',1:'Főként derült',2:'Részben felhős',3:'Borult',
        61:'Eső',71:'Hó',80:'Zápor',95:'Zivatar'
    };

    weatherIcon.innerHTML=icon(c,isDay);
    weatherText.textContent=`${t}°C • ${txt[c]||'Időjárás'}`;
    weatherTomorrow.innerHTML=`Holnap: ${tMin}° / ${tMax}° ${icon(cTomorrow,true)}`;
}

updateTime(); updateWeather();
setInterval(updateTime,1000);
setInterval(updateWeather,600000);
</script>

</body>
</html>
